[â¬… Atras](https://github.com/jdtb4/codember)

## DesafÃ­o 2: Detectando acceso no deseado

<details> 
<summary>ğŸ“ Instrucciones</summary>
<br/>

Creo que Î©MEGA estÃ¡ intentando entrar en el sistema. Por ahora, es un bebÃ© y estÃ¡ siguiendo patrones muy sencillos que podemos detectar pero estÃ¡ intentando crear contraseÃ±as de administrador para acceder a la terminal.

Â¿CÃ³mo podemos detectar estos intentos de acceso? EstÃ¡ siguiendo estos patrones:

- SÃ³lo usa letras minÃºsculas y dÃ­gitos.
- Nunca usa dÃ­gitos despuÃ©s de una letra (Una vez aparecen letras, la contraseÃ±a debe continuar solo con letras)
- Si usa dÃ­gitos, siempre los usa de forma igual o creciente (si sale un 3, ya no usarÃ¡ despuÃ©s un nÃºmero menor)
- Si usa letras, siempre las usa en orden alfabÃ©tico igual o creciente (si sale una "b" ya no podrÃ¡ usar una "a", por ejemplo)

Algunos ejemplos para que lo entiendas perfectamente:

Â´Â´Â´
234     -> true
abc      -> true
aabbcc   -> true (repite pero siempre ascendente)
112233   -> true (repite pero siempre ascendente)
a123     -> false (un nÃºmero despuÃ©s de una letra)
123abc   -> true
dbce     -> false (una "d" y despuÃ©s una "b")
Â´Â´Â´
Accede a este log.txt con una lista de intentos y con un programa cuenta cuÃ¡ntos han sido invÃ¡lidos y cuÃ¡ntos vÃ¡lidos. EnvÃ­a la respuesta usando el comando submit.

Por ejemplo, si hay 10 intentos vÃ¡lidos y 5 invÃ¡lidos envÃ­a el comando submit 10true5false.

</details>

## SoluciÃ³n

```js
const fs = require("fs");
function isValidPassword(password) {
  let hasLetters = false;
  let lastChar = "";
  let lastDigit = -1;

  for (let char of password) {
    if (/[0-9]/.test(char)) {
      if (hasLetters) return false;
      let digit = Number(char);
      if (digit < lastDigit) return false;
      lastDigit = digit;
    } else if (/[a-z]/.test(char)) {
      hasLetters = true;
      if (char < lastChar) return false;
      lastChar = char;
    } else {
      return false;
    }
  }
  return true;
}

function main(filePath) {
  const data = readFileSync(filePath, "utf8");
  const passwords = data.split("\n");
  let validPasswords = 0;
  let invalidCount = 0;

  passwords.forEach((password) =>
    isValidPassword(password) ? validPasswords++ : invalidCount++
  );
  console.log(`submit ${validPasswords}true${invalidCount}false`);
}

main("log.txt");

```

## Resultado

```bash
submit 299true198false
```
<br/>

